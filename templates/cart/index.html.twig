{% extends 'base.html.twig' %}

{% block title %}Mon panier{% endblock %}

{% block content %}

    <h1>Mon panier</h1>
 {# {{ dump(cart)}} #}
 {% if cart|length > 0 %}
<table class="table mt-3">
  <thead>
    <tr>
      <th scope="col">Produit</th>
      <th scope="col"></th>
      <th scope="col">Quantité</th>
      <th scope="col">Prix</th>
      <th scope="col">Total</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
  {% set total = null %}
  {% for product in cart %}
  {# {{ dump(product)}} #}
    <tr>
      <td><img src="{{ asset('images/products/' ~ product.product.image ) }}" alt="{{ product.product.name }}" height="75px"></td>
      <td>{{ product.product.name }}<br/> {{product.product.subtitle}}</td>

      <td>
            <a href="{{ path('app_decrease_to_cart', {'id': product.product.id}) }} "><img src="{{ asset('img/icons/moins.png') }}" height="15px" alt="ajouterproduit"></a>
      {{ product.quantity }}
       <a href="{{ path('app_add_to_cart', {'id': product.product.id}) }} "><img src="{{ asset('img/icons/add.png') }}" height="15px" alt="moins un produit"></a>
      
      </td>
      
      <td>{{ product.product.price }}€</td>
      <td>{{ product.product.price * product.quantity }}</td>
      <td><a href="{{ path('app_delete_to_cart', {'id': product.product.id}) }} "><img src="{{ asset('img/icons/trash.png') }}" height="18px" alt="supprimer produit"></a></td>
    </tr>
    {% set total = total + (product.product.price * product.quantity) %}

{% endfor %}

  </tbody>

</table>
        <div class="row">
        <div class="col-md-6">


            </div>
<div class="col-md-6">
            <div class="border p-3 p-md-4">
                    <div class="heading_s1 mb-3">
                        <h6>Total du panier</h6>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td class="cart_total_label">Sous-total HT</td>
                                    <td class="cart_total_amount">{{ cart|length }}</td>
                                </tr>
                                <tr>
                                    <td class="cart_total_label">Taxe (20%)</td>
                                    <td class="cart_total_amount">€{{ total }}</td>
                                </tr>
                              </tbody>
                        </table>
                    </div>
                    <a href="{{ path('app_order') }}" class="btn btn-success btn-block mt-3">Valider mon panier</a>
                  </div>
            </div>
            </div>
{# <div class="text-right">
<b>Nombre de produit :</b> {{ cart|length }}<br/>
<b>Total de mon panier :</b>{{ total }}
<a href="{{ path('app_order') }}" class="btn btn-success btn-block mt-3">Valider mon panier</a>
</div> #}
{% else %}
<p><b>Votre panier est vide</b></p>
{% endif %}
<br/><br/><br/><br/><br/><br/><br/><br/><br/>
{% endblock %}
